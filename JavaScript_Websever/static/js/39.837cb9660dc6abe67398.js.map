{"version":3,"sources":["webpack:///src/views/component/TreeEdit/components/OperateTree.vue","webpack:///./src/views/component/TreeEdit/components/OperateTree.vue?3a14","webpack:///./src/views/component/TreeEdit/components/OperateTree.vue"],"names":["OperateTree","components","ContextMenu","props","title","type","String","required","default","action","Object","parent","value","label","children","data","loading","top","left","isCollapse","queryString","itemList","itemNode","itemModel","dialogVisibleForm","watch","val","this","$refs","tree","$children","forEach","v","expanded","filter","created","getItemList","methods","renderContent","h","_ref","node","class","isLeaf","filterNode","indexOf","onClickNode","nodeTree","onContextmenuNode","e","contextMenu","openMenu","onAddNode","rowGuid","onEditNode","onCopyNode","insertBefore","onRemoveNode","remove","_this","$http","get","params","page","rows","then","response","status","$message","warning","message","body","duration","_ref2","$hp","resp","finally","onSaveItem","insertAfter","append","components_OperateTree","render","_vm","_h","$createElement","_c","_self","staticClass","slot","_v","_s","staticStyle","right","attrs","on","click","$event","placeholder","model","callback","$$v","expression","directives","name","rawName","ref","show-checkbox","default-expand-all","expand-on-click-node","render-content","filter-node-method","node-key","node-click","node-contextmenu","visible","close-on-click-modal","update:visible","label-width","$set","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/39.837cb9660dc6abe67398.js","sourcesContent":["<template>\n  <el-card class=\"title-card\">\n    <template slot=\"header\">\n      <span class=\"el-card__title\">{{ title }}</span>\n      <button class=\"el-card__headerbtn\" style=\"right: 70px\">确认方案</button>\n      <button\n        class=\"el-card__headerbtn\"\n        :title=\"`${isCollapse ? '收起' : '展开'}`\"\n        @click=\"isCollapse = !isCollapse\">\n        <i :class=\"`fas fa-${isCollapse ? 'minus': 'plus'}`\"></i>\n      </button>\n      <button type=\"button\" class=\"el-card__headerbtn\" title=\"刷新\" @click=\"getItemList\">\n        <i class=\"fas fa-redo\"></i>\n      </button>\n    </template>\n    <el-input v-model=\"queryString\" placeholder=\"输入关键字进行过滤\" class=\"mar-b-sm\"></el-input>\n    <el-tree\n      ref=\"tree\"\n      v-loading=\"loading\"\n      show-checkbox\n      :default-expand-all=\"true\"\n      :expand-on-click-node=\"false\"\n      :data=\"itemList\"\n      :render-content=\"renderContent\"\n      :filter-node-method=\"filterNode\"\n      node-key=\"rowGuid\"\n      @node-click=\"onClickNode\"\n      @node-contextmenu=\"onContextmenuNode\">\n    </el-tree>\n    <el-dialog\n      title=\"编辑节点\"\n      :visible.sync=\"dialogVisibleForm\"\n      :close-on-click-modal=\"false\">\n      <el-form :model=\"itemModel\" label-width=\"75px\">\n        <el-form-item label=\"标签名：\">\n          <el-input v-model=\"itemModel.label\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisibleForm = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"onSaveItem\">确 定</el-button>\n      </div>\n    </el-dialog>\n    <context-menu ref=\"contextMenu\">\n      <li @click=\"onAddNode\"><i class=\"fas fa-plus\"></i><span>新增节点</span></li>\n      <li @click=\"onEditNode\"><i class=\"fas fa-pencil-alt\"></i><span>修改节点</span></li>\n      <li @click=\"onCopyNode\"><i class=\"fas fa-copy\"></i><span>复制节点</span></li>\n      <li @click=\"onRemoveNode\"><i class=\"fas fa-trash-alt\"></i><span>删除节点</span></li>\n    </context-menu>\n  </el-card>\n</template>\n\n<script>\nimport ContextMenu from '@/components/ContextMenu';\n\nexport default {\n  components: {\n    ContextMenu,\n  },\n  props: {\n    // 标题\n    title: {\n      type: String,\n      required: false,\n      default: '',\n    },\n    // 选项数据\n    action: {\n      type: String,\n      required: true,\n    },\n    // 树节点配置选项\n    props: {\n      type: Object,\n      required: false,\n      default: () => ({\n        parent: 'parentId',\n        value: 'rowGuid',\n        label: 'areaName',\n        children: 'children',\n      }),\n    },\n  },\n  data() {\n    return {\n      loading: false,\n      top: 0,\n      left: 0,\n      // 是否收起节点\n      isCollapse: true,\n      // 查询字符\n      queryString: '',\n      // 树形层级数据\n      itemList: [],\n      // 右击选中节点\n      itemNode: {},\n      // 表单编辑对象\n      itemModel: {},\n      // 编辑表单显示状态\n      dialogVisibleForm: false,\n    };\n  },\n  watch: {\n    // 收缩节点\n    isCollapse(val) {\n      const { tree } = this.$refs;\n      tree.$children.forEach((v) => {\n        v.expanded = !!val;\n      });\n    },\n    queryString(val) {\n      this.$refs.tree.filter(val);\n    },\n  },\n  created() {\n    this.getItemList();\n  },\n  methods: {\n    // 渲染节点\n    renderContent(h, { node }) {\n      return (\n        <span class=\"el-tree__icon\">\n          <i class={`fas fa-${node.isLeaf ? 'file' : 'folder'}`} />\n          <span>{node.label}</span>\n        </span>\n      );\n    },\n    // 过滤节点\n    filterNode(value, data) {\n      if (!value) return true;\n      return data.label.indexOf(value) !== -1;\n    },\n    // 单击节点事件\n    onClickNode(data, node, tree) {\n      const nodeTree = tree;\n      nodeTree.expanded = !nodeTree.expanded;\n    },\n    // 右击节点事件\n    onContextmenuNode(e, data, node, tree) {\n      this.itemNode = {\n        e, data, node, tree,\n      };\n      this.$refs.contextMenu.openMenu(e);\n    },\n    // 节点新增\n    onAddNode() {\n      this.itemModel = {\n        rowGuid: '',\n        label: '',\n      };\n      this.dialogVisibleForm = true;\n    },\n    // 节点修改\n    onEditNode() {\n      this.itemModel = this.itemNode.data;\n      this.dialogVisibleForm = true;\n    },\n    // 节点复制\n    onCopyNode() {\n      this.$refs.tree.insertBefore(this.itemNode.data, this.itemNode.data);\n    },\n    // 节点删除\n    onRemoveNode() {\n      this.$refs.tree.remove(this.itemNode.data);\n    },\n    // 获取数据列表\n    getItemList() {\n      this.loading = true;\n      this.$http.get(this.action, {\n        params: { page: 1, rows: 1000000 },\n      }).then((response) => {\n        if (response.status === 200) {\n          this.itemList = response.data.rows;\n        } else {\n          this.$message.warning({\n            message: response.body.message,\n            duration: 1500,\n          });\n        }\n      }, ({ response }) => {\n        this.$hp.resp(response);\n      })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    onSaveItem() {\n      const id = this.itemModel.rowGuid;\n      if (!id) {\n        this.$refs.tree.append(this.itemModel, this.itemNode.node);\n      } else {\n        this.$refs.tree.insertAfter(this.itemModel, this.itemNode.node);\n        this.$refs.tree.remove(this.itemNode.data);\n      }\n      this.dialogVisibleForm = false;\n    },\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/component/TreeEdit/components/OperateTree.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"title-card\"},[_c('template',{slot:\"header\"},[_c('span',{staticClass:\"el-card__title\"},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('button',{staticClass:\"el-card__headerbtn\",staticStyle:{\"right\":\"70px\"}},[_vm._v(\"确认方案\")]),_vm._v(\" \"),_c('button',{staticClass:\"el-card__headerbtn\",attrs:{\"title\":(\"\" + (_vm.isCollapse ? '收起' : '展开'))},on:{\"click\":function($event){_vm.isCollapse = !_vm.isCollapse}}},[_c('i',{class:(\"fas fa-\" + (_vm.isCollapse ? 'minus': 'plus'))})]),_vm._v(\" \"),_c('button',{staticClass:\"el-card__headerbtn\",attrs:{\"type\":\"button\",\"title\":\"刷新\"},on:{\"click\":_vm.getItemList}},[_c('i',{staticClass:\"fas fa-redo\"})])]),_vm._v(\" \"),_c('el-input',{staticClass:\"mar-b-sm\",attrs:{\"placeholder\":\"输入关键字进行过滤\"},model:{value:(_vm.queryString),callback:function ($$v) {_vm.queryString=$$v},expression:\"queryString\"}}),_vm._v(\" \"),_c('el-tree',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"tree\",attrs:{\"show-checkbox\":\"\",\"default-expand-all\":true,\"expand-on-click-node\":false,\"data\":_vm.itemList,\"render-content\":_vm.renderContent,\"filter-node-method\":_vm.filterNode,\"node-key\":\"rowGuid\"},on:{\"node-click\":_vm.onClickNode,\"node-contextmenu\":_vm.onContextmenuNode}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"编辑节点\",\"visible\":_vm.dialogVisibleForm,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogVisibleForm=$event}}},[_c('el-form',{attrs:{\"model\":_vm.itemModel,\"label-width\":\"75px\"}},[_c('el-form-item',{attrs:{\"label\":\"标签名：\"}},[_c('el-input',{model:{value:(_vm.itemModel.label),callback:function ($$v) {_vm.$set(_vm.itemModel, \"label\", $$v)},expression:\"itemModel.label\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisibleForm = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSaveItem}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('context-menu',{ref:\"contextMenu\"},[_c('li',{on:{\"click\":_vm.onAddNode}},[_c('i',{staticClass:\"fas fa-plus\"}),_c('span',[_vm._v(\"新增节点\")])]),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.onEditNode}},[_c('i',{staticClass:\"fas fa-pencil-alt\"}),_c('span',[_vm._v(\"修改节点\")])]),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.onCopyNode}},[_c('i',{staticClass:\"fas fa-copy\"}),_c('span',[_vm._v(\"复制节点\")])]),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.onRemoveNode}},[_c('i',{staticClass:\"fas fa-trash-alt\"}),_c('span',[_vm._v(\"删除节点\")])])])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-77a11db6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/component/TreeEdit/components/OperateTree.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./OperateTree.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./OperateTree.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-77a11db6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./OperateTree.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/component/TreeEdit/components/OperateTree.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}