webpackJsonp([39],{osQW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{ContextMenu:i("Rswz").a},props:{title:{type:String,required:!1,default:""},action:{type:String,required:!0},props:{type:Object,required:!1,default:function(){return{parent:"parentId",value:"rowGuid",label:"areaName",children:"children"}}}},data:function(){return{loading:!1,top:0,left:0,isCollapse:!0,queryString:"",itemList:[],itemNode:{},itemModel:{},dialogVisibleForm:!1}},watch:{isCollapse:function(e){this.$refs.tree.$children.forEach(function(t){t.expanded=!!e})},queryString:function(e){this.$refs.tree.filter(e)}},created:function(){this.getItemList()},methods:{renderContent:function(e,t){var i=t.node;return e("span",{class:"el-tree__icon"},[e("i",{class:"fas fa-"+(i.isLeaf?"file":"folder")}),e("span",[i.label])])},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},onClickNode:function(e,t,i){var o=i;o.expanded=!o.expanded},onContextmenuNode:function(e,t,i,o){this.itemNode={e:e,data:t,node:i,tree:o},this.$refs.contextMenu.openMenu(e)},onAddNode:function(){this.itemModel={rowGuid:"",label:""},this.dialogVisibleForm=!0},onEditNode:function(){this.itemModel=this.itemNode.data,this.dialogVisibleForm=!0},onCopyNode:function(){this.$refs.tree.insertBefore(this.itemNode.data,this.itemNode.data)},onRemoveNode:function(){this.$refs.tree.remove(this.itemNode.data)},getItemList:function(){var e=this;this.loading=!0,this.$http.get(this.action,{params:{page:1,rows:1e6}}).then(function(t){200===t.status?e.itemList=t.data.rows:e.$message.warning({message:t.body.message,duration:1500})},function(t){var i=t.response;e.$hp.resp(i)}).finally(function(){e.loading=!1})},onSaveItem:function(){this.itemModel.rowGuid?(this.$refs.tree.insertAfter(this.itemModel,this.itemNode.node),this.$refs.tree.remove(this.itemNode.data)):this.$refs.tree.append(this.itemModel,this.itemNode.node),this.dialogVisibleForm=!1}}},n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"title-card"},[i("template",{slot:"header"},[i("span",{staticClass:"el-card__title"},[e._v(e._s(e.title))]),e._v(" "),i("button",{staticClass:"el-card__headerbtn",staticStyle:{right:"70px"}},[e._v("确认方案")]),e._v(" "),i("button",{staticClass:"el-card__headerbtn",attrs:{title:e.isCollapse?"收起":"展开"},on:{click:function(t){e.isCollapse=!e.isCollapse}}},[i("i",{class:"fas fa-"+(e.isCollapse?"minus":"plus")})]),e._v(" "),i("button",{staticClass:"el-card__headerbtn",attrs:{type:"button",title:"刷新"},on:{click:e.getItemList}},[i("i",{staticClass:"fas fa-redo"})])]),e._v(" "),i("el-input",{staticClass:"mar-b-sm",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.queryString,callback:function(t){e.queryString=t},expression:"queryString"}}),e._v(" "),i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{"show-checkbox":"","default-expand-all":!0,"expand-on-click-node":!1,data:e.itemList,"render-content":e.renderContent,"filter-node-method":e.filterNode,"node-key":"rowGuid"},on:{"node-click":e.onClickNode,"node-contextmenu":e.onContextmenuNode}}),e._v(" "),i("el-dialog",{attrs:{title:"编辑节点",visible:e.dialogVisibleForm,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisibleForm=t}}},[i("el-form",{attrs:{model:e.itemModel,"label-width":"75px"}},[i("el-form-item",{attrs:{label:"标签名："}},[i("el-input",{model:{value:e.itemModel.label,callback:function(t){e.$set(e.itemModel,"label",t)},expression:"itemModel.label"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisibleForm=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.onSaveItem}},[e._v("确 定")])],1)],1),e._v(" "),i("context-menu",{ref:"contextMenu"},[i("li",{on:{click:e.onAddNode}},[i("i",{staticClass:"fas fa-plus"}),i("span",[e._v("新增节点")])]),e._v(" "),i("li",{on:{click:e.onEditNode}},[i("i",{staticClass:"fas fa-pencil-alt"}),i("span",[e._v("修改节点")])]),e._v(" "),i("li",{on:{click:e.onCopyNode}},[i("i",{staticClass:"fas fa-copy"}),i("span",[e._v("复制节点")])]),e._v(" "),i("li",{on:{click:e.onRemoveNode}},[i("i",{staticClass:"fas fa-trash-alt"}),i("span",[e._v("删除节点")])])])],2)},staticRenderFns:[]},a=i("C7Lr")(o,n,!1,null,null,null);t.default=a.exports}});
//# sourceMappingURL=39.837cb9660dc6abe67398.js.map