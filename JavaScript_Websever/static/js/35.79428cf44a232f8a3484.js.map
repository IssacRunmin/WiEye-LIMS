{"version":3,"sources":["webpack:///src/views/example/testManager/TestProject/components/PeopleManages.vue","webpack:///./src/views/example/testManager/TestProject/components/PeopleManages.vue?8c46","webpack:///./src/views/example/testManager/TestProject/components/PeopleManages.vue"],"names":["PeopleManages","components","draggable","a","props","data","itemList","selectedList","isDragging","delayedDragging","dragOptions","animation","group","disabled","ghostClass","pager","page","rows","total","computed","selected","arr","this","forEach","item","push","personId","id","orderNum","watch","newValue","_this","$nextTick","created","getItemList","methods","onMove","_ref","relatedContext","draggedContext","relatedElement","element","draggedElement","fixed","_this2","loading","_pager","$http","get","params","extends_default","queryForm","then","response","status","$message","warning","message","body","duration","_ref2","$hp","resp","finally","onSaveItem","_this3","put","rowId","success","showClose","_ref3","components_PeopleManages","render","_vm","_h","$createElement","_c","_self","attrs","type","on","click","$event","staticClass","aria-hidden","_v","gutter","span","slot","options","move","start","end","model","value","callback","$$v","expression","name","_l","key","_s","cName","tag","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/35.79428cf44a232f8a3484.js","sourcesContent":["<!-- 人员管理 -->\n\n<template>\n  <div>\n    <el-button type=\"primary\" @click=\"onSaveItem()\">\n      <i class=\"fas fa-save\" aria-hidden=\"true\"></i> 保 存\n    </el-button>\n    <el-row :gutter=\"10\" class=\"mar-t-sm\">\n      <el-col :span=\"12\">\n        <el-card class=\"title-card\">\n          <template slot=\"header\">所有人员</template>\n          <draggable\n            class=\"list-group\"\n            element=\"ul\"\n            v-model=\"itemList\"\n            :options=\"dragOptions\"\n            :move=\"onMove\"\n            @start=\"isDragging = true\"\n            @end=\"isDragging = false\">\n            <transition-group type=\"transition\" :name=\"'flip-list'\">\n              <li class=\"list-group-item\" v-for=\"item in itemList\" :key=\"item.id\">\n                {{item.cName}}\n              </li>\n            </transition-group>\n          </draggable>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card class=\"title-card\">\n          <template slot=\"header\">主项/兼项</template>\n          <draggable element=\"span\" v-model=\"selectedList\" :options=\"dragOptions\" :move=\"onMove\">\n            <transition-group name=\"no\" class=\"list-group\" tag=\"ul\">\n              <li class=\"list-group-item\" v-for=\"item in selectedList\" :key=\"item.id\">\n                {{item.cName}}\n              </li>\n            </transition-group>\n          </draggable>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport draggable from 'vuedraggable';\n\nexport default {\n  components: {\n    draggable,\n  },\n  props: ['rowId'],\n  data() {\n    return {\n      itemList: [],\n      selectedList: [],\n      isDragging: false,\n      delayedDragging: false,\n      dragOptions: {\n        animation: 0,\n        group: 'description',\n        disabled: false,\n        ghostClass: 'ghost',\n      },\n      pager: {\n        page: 1,\n        rows: 13,\n        total: 0,\n      },\n    };\n  },\n  computed: {\n    selected() {\n      const arr = [];\n      this.selectedList.forEach((item) => {\n        arr.push({ personId: item.id, orderNum: item.orderNum });\n      });\n      return arr;\n    },\n  },\n  watch: {\n    isDragging(newValue) {\n      if (newValue) {\n        this.delayedDragging = true;\n        return;\n      }\n      this.$nextTick(() => {\n        this.delayedDragging = false;\n      });\n    },\n  },\n  created() {\n    this.getItemList();\n  },\n  methods: {\n    onMove({ relatedContext, draggedContext }) {\n      const relatedElement = relatedContext.element;\n      const draggedElement = draggedContext.element;\n      return (\n        (!relatedElement || !relatedElement.fixed) && !draggedElement.fixed\n      );\n    },\n    // 获取人员信息\n    getItemList() {\n      this.loading = true;\n      const { page, rows } = this.pager;\n      this.$http.get('api/person', {\n        params: { page, rows, ...this.queryForm },\n      }).then((response) => {\n        if (response.status === 200) {\n          this.itemList = response.data.rows;\n          this.pager.total = response.data.total;\n        } else {\n          this.$message.warning({\n            message: response.body.message,\n            duration: 1500,\n          });\n        }\n      }, ({ response }) => {\n        this.$hp.resp(response);\n      })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    onSaveItem() {\n      this.$http.put(`api/testPerson/${this.rowId}`, this.selected).then((response) => {\n        if (response.status === 200) {\n          this.$message.success({\n            message: '操作成功',\n            duration: 1500,\n            showClose: true,\n          });\n        } else {\n          this.$message.warning({\n            message: response.data.message,\n            duration: 1500,\n          });\n        }\n      }, ({ response }) => {\n        this.$hp.resp(response);\n      });\n    },\n  },\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/example/testManager/TestProject/components/PeopleManages.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSaveItem()}}},[_c('i',{staticClass:\"fas fa-save\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" 保 存\\n  \")]),_vm._v(\" \"),_c('el-row',{staticClass:\"mar-t-sm\",attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-card',{staticClass:\"title-card\"},[_c('template',{slot:\"header\"},[_vm._v(\"所有人员\")]),_vm._v(\" \"),_c('draggable',{staticClass:\"list-group\",attrs:{\"element\":\"ul\",\"options\":_vm.dragOptions,\"move\":_vm.onMove},on:{\"start\":function($event){_vm.isDragging = true},\"end\":function($event){_vm.isDragging = false}},model:{value:(_vm.itemList),callback:function ($$v) {_vm.itemList=$$v},expression:\"itemList\"}},[_c('transition-group',{attrs:{\"type\":\"transition\",\"name\":'flip-list'}},_vm._l((_vm.itemList),function(item){return _c('li',{key:item.id,staticClass:\"list-group-item\"},[_vm._v(\"\\n              \"+_vm._s(item.cName)+\"\\n            \")])}),0)],1)],2)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-card',{staticClass:\"title-card\"},[_c('template',{slot:\"header\"},[_vm._v(\"主项/兼项\")]),_vm._v(\" \"),_c('draggable',{attrs:{\"element\":\"span\",\"options\":_vm.dragOptions,\"move\":_vm.onMove},model:{value:(_vm.selectedList),callback:function ($$v) {_vm.selectedList=$$v},expression:\"selectedList\"}},[_c('transition-group',{staticClass:\"list-group\",attrs:{\"name\":\"no\",\"tag\":\"ul\"}},_vm._l((_vm.selectedList),function(item){return _c('li',{key:item.id,staticClass:\"list-group-item\"},[_vm._v(\"\\n              \"+_vm._s(item.cName)+\"\\n            \")])}),0)],1)],2)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-26d410a7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/example/testManager/TestProject/components/PeopleManages.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PeopleManages.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PeopleManages.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-26d410a7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./PeopleManages.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/example/testManager/TestProject/components/PeopleManages.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}